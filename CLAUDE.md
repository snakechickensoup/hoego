# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 프로젝트 개요

Hoego는 Claude AI를 활용한 대화형 회고 시스템입니다.
사용자가 Claude와 체계적인 대화를 통해 주간/월간 회고를 작성할 수 있도록 도와주며,
Notion 연동 또는 독립적 사용이 모두 가능합니다.

## 프로젝트 구조

- `docs/setup.md` - Notion 연동과 Claude Code MCP 설정을 위한 초기 설정 가이드
- `guide.md` - 회고 작성 프로세스 가이드
- `settings.json` - 회고 시스템 설정 (Notion DB ID, 문장 정리 옵션)
- `templates/weekly/` - 주간 회고 전용 폴더
  - `template.md` - 주간 회고 템플릿
  - `prompts.md` - 주간 회고용 질문 패턴
- `templates/monthly/` - 월간 회고 전용 폴더
  - `template.md` - 월간 회고 템플릿
  - `prompts.md` - 월간 회고용 질문 패턴
- `commands/` - 슬래시 커맨드 파일들
  - `주간회고.md` - 주간 회고 슬래시 커맨드
  - `월간회고.md` - 월간 회고 슬래시 커맨드
- `backup.md` - 백업 파일 저장소

## Claude 작업 가이드라인

### 설정 파일 확인

- 회고 작업 시 `settings.json` 파일을 먼저 읽어서 설정 확인
- `sentence_cleanup` 설정에 따라 문장 정리 수준 조절:
  - "off": 사용자 원문 그대로 보존
  - "light": 핵심만 간단히 정리
  - "normal": 자세하지만 깔끔하게 정리
- Notion 연동 시 설정된 database_id 사용

### 문서 준수

- 각 기능별 문서들을 정확히 따를 것
- 임의로 프로세스를 변경하지 말고 기존 문서의 패턴 사용
- 특히 해당 기능의 가이드, 프롬프트, 템플릿 구조를 준수

### 회고 작성 프로세스 (필수 준수)

#### 슬래시 커맨드 사용 (권장)

- `/주간회고`: 주간 회고 자동 시작 (templates/weekly/ 폴더 사용)
- `/월간회고`: 월간 회고 자동 시작 (templates/monthly/ 폴더 사용)

#### 수동 진행 시 프로세스

1. **시작**: backup.md 자동 확인 → 있으면 이어서 할지 물어보기
2. **Notion 메모 수집** (설정된 경우):
   - notion_daily_memo_database_id가 설정되어 있으면 해당 기간 메모 자동 수집
   - 메모가 있으면: "이런 기록들이 있네요" 하며 메모 기반으로 시작
   - 메모가 없으면: 일반 메모리 리콜로 진행 (아무 문제없음)
3. **메모리 리콜**: 해당 회고 타입의 prompts.md 패턴 사용
   - 주간: templates/weekly/prompts.md (전체 주를 한번에, 요일별 분할 금지)
   - 월간: templates/monthly/prompts.md (한 달 전체 흐름과 패턴 중심)
4. **체계적 진행**: 해당 회고 타입의 template.md 구조 정확히 따르기
5. **완성 및 저장**:
   - 해당 template.md 형식으로 최종 문서 작성
   - 완성된 회고를 backup.md에 자동 저장 (덮어쓰기)
   - notion_review_database_id가 설정되어 있으면 Notion에도 저장 (선택사항)

### 질문 방식

- 자연스러운 대화로 기억 되살리기
- 표면적 답변을 구체적 질문으로 확장

### 회고 진행 효율화

#### 회고 진행 시
- 템플릿의 모든 질문을 다 하지 말고 상황에 맞게 핵심 질문만 선별
- 목표 시간: 20-30분
- 흐름 끊지 않고 자연스럽게 이어지는 대화로 진행
- 사용자 답변에 따라 적절한 심화 질문 선택

### 문장 정리 가이드라인

#### settings.json의 sentence_cleanup 설정별 처리

**"off"**: 
- 사용자 원문 그대로 100% 보존

**"light"**: 
- 횡설수설한 내용을 논리적 흐름으로 정리
- 사용자 말투와 표현 방식 최대한 보존
- 완전한 문장으로 다듬되 개성은 유지

**"normal"**: 
- 구구절절한 이야기를 자연스럽고 읽기 좋은 문장으로 정리
- 핵심 의미와 감정은 보존하되 흐름 있게 작성
- 사용자 어투 반영하되 과도한 격식체는 피함
- 키워드 나열이 아닌 완성된 문장으로 작성

**예시**:
- 원문: "새 라이브러리 써봤는데... 뭔가 복잡하더라고... 그래서 문서 찾아보니까 예제가 별로 없어서... 결국 시행착오로 해결했는데 시간이..."
- light: "새 라이브러리를 써봤는데 복잡하더라. 문서에 예제가 별로 없어서 시행착오로 해결했는데 시간이 많이 걸렸다."
- normal: "새로운 라이브러리를 사용해봤는데 생각보다 복잡했다. 문서에 예제가 부족해서 시행착오를 겪으며 해결하느라 시간이 많이 소요되었다."

### 백업 관리

- 회고 시작시 backup.md 자동 확인하여 이어서 할지 물어보기
- 중단시 "백업에 저장할까요?" 물어보고 backup.md에 저장
- **회고 완성시 backup.md에 최종 결과 자동 저장 (덮어쓰기)**
- backup.md는 .gitignore에 포함되어 로컬에서만 관리

## 개발 참고사항

- 모든 내용은 한국어로 작성
